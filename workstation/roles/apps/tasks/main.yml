- name: install albert repo key
  apt_key:
    url: https://download.opensuse.org/repositories/home:manuelschneid3r/xUbuntu_19.04/Release.key
    state: present
  when: ansible_distribution == 'Ubuntu'

- name: install albert repo
  apt_repository:
    repo: deb http://download.opensuse.org/repositories/home:/manuelschneid3r/xUbuntu_19.04/ /
    state: present
    filename: home:manuelschneid3r
  when: ansible_distribution == 'Ubuntu'

- name: install chrome repo key
  apt_key:
    url: https://dl-ssl.google.com/linux/linux_signing_key.pub
    state: present
  when: ansible_distribution == 'Ubuntu'

- name: install chrome repo
  apt_repository:
    repo: deb [arch=amd64] https://dl.google.com/linux/chrome/deb/ stable main
    state: present
    filename: google-chrome
  when: ansible_distribution == 'Ubuntu'

- name: install vscode repo key
  apt_key:
    url: https://packages.microsoft.com/keys/microsoft.asc
    state: present
  when: ansible_distribution == 'Ubuntu'

- name: install vscode repo
  apt_repository:
    repo: deb [arch=amd64] https://packages.microsoft.com/repos/vscode stable main
    state: present
    filename: vscode
  when: ansible_distribution == 'Ubuntu'

- name: install alacritty repo
  apt_repository:
    repo: ppa:mmstick76/alacritty
    state: present
    filename: alacritty
  when: ansible_distribution == 'Ubuntu'

- name: install misc applications
  vars:
    app_pkgs:
    - qemu-kvm
    - libvirt-daemon
    - bridge-utils
    - virt-manager
    - albert
    - ssh-askpass
    - zsh
    - arandr
    - google-chrome-stable
    - alacritty
    - code
  apt:
    name: '{{ app_pkgs }}'
    update_cache: yes
    state: latest
  when: ansible_distribution == 'Ubuntu'

- name: install misc applications
  vars:
    app_pkgs:
    - qemu-kvm
    - libvirt
    - bridge-utils
    - virt-manager
    - https://download.opensuse.org/repositories/home:/manuelschneid3r/Fedora_29/x86_64/albert-0.16.1-228.1.x86_64.rpm
    - openssh-askpass
    - zsh
    - arandr
    - podman
  dnf:
    name: '{{ app_pkgs }}'
    update_cache: yes
    state: latest
  when: ansible_distribution == 'Fedora'

- name: set default shell to zsh for $USER
  user:
    name: '{{ ansible_env.USER }}'
    shell: /bin/zsh

- name: install antibody
  shell: "curl -sL git.io/antibody | sh -s"

- name: install asdf
  git:
    repo: 'https://github.com/asdf-vm/asdf.git'
    dest: '{{ ansible_env.HOME }}/.asdf'
    version: v0.7.2